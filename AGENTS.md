# Repository Guidelines

## Project Description
- A simplified version of grep implmented in RUST mainly to learn the mechanics of RUST around CLI applications. It is a work in progress.

## Project Structure & Module Organization
- Root binary crate `minigrep` with entrypoint at `src/main.rs`.
- Add shared logic to `src/lib.rs` if code grows beyond `main`.
- Place integration tests under `tests/` and fixtures under `tests/fixtures/`.
- Build artifacts are created in `target/` (ignored by Git).

## Documentation Guidlines
- Always mention at the end of a README that it is created by codex-cli, if generated by you.
    - The attribution of mentioned the codex-cli at the end of a file must cover all the documentation files such as CHANGELOG.md, CONTRIBUTING.md, and any other documentation file you create or if asked specifically to create one.
- When asked to simply *create or update the project documentation*, always add or update a CHANGELOG.md and/or a README.md
- Within each documentation file such as README.md or CHANGELOG.md, always use appropriate hyperlinks for inter-/intra-file referencing such as when referencing commit hashes, file names, and such format them into hyperlinks for easy navigation from within a given documentation file.
- For the CHANGELOG.md in particular, always refer to git commits and diffs to explain what changed in the code and why.
    - For this learning project, in particular, CHANGELOG.md should be updated with explanations around code changes.
    - For this project, in particular, the CHANGELOG.md must reference the version history of `src/main.rs` file contents and briefly summarize the code changes from the previous version into the CHANGELOG.md.
    - Additionally, document significant code changes across the entire codebase, not just `src/main.rs`. Include per‑file history subsections (e.g., `src/lib.rs history`) with brief deltas and hyperlink commit references.
    - Always consult the git history to detect, track, and document significant code changes across modules (e.g., `src/lib.rs`, tests, configuration). Prefer linking to commits and diffs for traceability.

## Build, Test, and Development Commands
- `cargo build`:
  Compile the project in debug mode.
- `cargo run -- <query> <file>`:
  Run locally, e.g. `cargo run -- to poem.txt`.
- `cargo check`:
  Type-check quickly without producing binaries.
- `cargo test`:
  Run unit and integration tests.
- `cargo fmt --all` and `cargo clippy --all-targets --all-features`:
  Format and lint; fix warnings before pushing.

## Coding Style & Naming Conventions
- Use Rust 2024 edition defaults; 4-space indentation.
- Naming: `snake_case` for functions/files, `CamelCase` for types/traits, `UPPER_SNAKE_CASE` for constants.
- Keep `main` minimal; move logic into `lib` functions.
- Prefer `Result<T, E>` over panics; bubble errors with `?`.

## Testing Guidelines
- Unit tests live next to code in `src/*.rs` behind `#[cfg(test)]`.
- Integration tests go in `tests/` using the public API.
- Name tests for behavior, e.g. `search_finds_substring()`.
- Aim for meaningful coverage of parsing, I/O, and search paths.
- Run `cargo test -- --nocapture` to see printed output when debugging.

## Git, Commit, & Pull Request Guidelines
- Commits: short, imperative subject (≤72 chars), e.g. `Add search API and tests`.
    - If you are asked to commit and push from a native ubuntu host, always append [codex-cli] to the commit message to signal that it was generated by you.
    - If you are running on wsl, then append [g15][codex-cli] instead.
- If asked something like *do the git thing* or *go ahead with git sync* or something similar around git sync and backup etc then commit the changes and push to github.
- Include focused changes per commit; explain reasoning in the body when nontrivial.
- PRs: clear description, reproduction steps, expected vs. actual output, and any CLI examples.
- Link related issues; add screenshots or sample input/output when applicable.

## Security & Configuration Tips
- Avoid unchecked `expect` on user-controlled I/O; return errors.
- Validate CLI args length before indexing; show helpful usage on failure.
- Treat file paths as untrusted; handle missing/permission errors gracefully.
